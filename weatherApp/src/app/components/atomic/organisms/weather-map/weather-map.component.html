<section class="w-full h-full flex flex-col bg-[#121212]">
  <!-- Layer Selector -->
  <div
    class="flex items-center justify-center gap-2 p-4 bg-surface-dark/50 backdrop-blur-md"
  >
    <button
      *ngFor="let layer of layerOptions"
      (click)="onLayerChange(layer.id)"
      class="flex items-center gap-2 px-4 py-2 rounded-full transition-all"
      [ngClass]="{
        'bg-primary text-black font-bold': selectedLayer === layer.id,
        'bg-surface-dark/60 text-white/60 hover:bg-surface-dark/80':
          selectedLayer !== layer.id,
      }"
    >
      <span class="material-symbols-outlined text-[18px]">
        {{ layer.icon }}
      </span>
      <span class="text-xs font-semibold hidden md:inline">{{
        layer.label | translate
      }}</span>
    </button>

    <!-- Center on location button -->
    <button
      (click)="centerOnLocation()"
      class="flex items-center gap-2 px-4 py-2 rounded-full bg-surface-dark/60 text-white/60 hover:bg-surface-dark/80 transition-all ml-4"
    >
      <span class="material-symbols-outlined text-[18px]"> my_location </span>
    </button>
  </div>

  <!-- Legend (moved up) -->
  <div
    class="flex items-center justify-center gap-4 p-3 bg-surface-dark/40 backdrop-blur-md border-t border-white/5"
  >
    <div class="flex items-center gap-2" *ngIf="selectedLayer === 'temp'">
      <span class="text-xs text-white/80 font-semibold">{{
        "MAP.LEGEND.COLD" | translate
      }}</span>
      <div
        class="w-32 md:w-48 h-3 rounded-full bg-gradient-to-r from-blue-500 via-green-400 via-yellow-400 to-red-500 shadow-lg"
      ></div>
      <span class="text-xs text-white/80 font-semibold">{{
        "MAP.LEGEND.HOT" | translate
      }}</span>
    </div>
    <div
      class="flex items-center gap-2"
      *ngIf="selectedLayer === 'precipitation'"
    >
      <span class="text-xs text-white/80 font-semibold">{{
        "MAP.LEGEND.LOW" | translate
      }}</span>
      <div
        class="w-32 md:w-48 h-3 rounded-full bg-gradient-to-r from-transparent via-blue-400 to-blue-700 shadow-lg"
      ></div>
      <span class="text-xs text-white/80 font-semibold">{{
        "MAP.LEGEND.HIGH" | translate
      }}</span>
    </div>
    <div class="flex items-center gap-2" *ngIf="selectedLayer === 'clouds'">
      <span class="text-xs text-white/80 font-semibold">{{
        "MAP.LEGEND.CLEAR" | translate
      }}</span>
      <div
        class="w-32 md:w-48 h-3 rounded-full bg-gradient-to-r from-transparent to-gray-400 shadow-lg"
      ></div>
      <span class="text-xs text-white/80 font-semibold">{{
        "MAP.LEGEND.CLOUDY" | translate
      }}</span>
    </div>
    <div class="flex items-center gap-2" *ngIf="selectedLayer === 'wind'">
      <span class="text-xs text-white/80 font-semibold">{{
        "MAP.LEGEND.CALM" | translate
      }}</span>
      <div
        class="w-32 md:w-48 h-3 rounded-full bg-gradient-to-r from-green-400 via-yellow-400 to-red-500 shadow-lg"
      ></div>
      <span class="text-xs text-white/80 font-semibold">{{
        "MAP.LEGEND.STRONG" | translate
      }}</span>
    </div>
  </div>

  <!-- Map Container -->
  <div id="weather-map" class="flex-1 w-full min-h-[400px]"></div>
</section>
